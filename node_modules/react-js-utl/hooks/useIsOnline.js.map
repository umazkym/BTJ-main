{"version":3,"sources":["../src/hooks/useIsOnline.js"],"names":["useState","useEffect","useWindowRef","useCallbackRef","useIsOnline","windowRef","current","navigator","onLine","isOnline","setIsOnline","onlineCallbackRef","offlineCallbackRef","onlineCallback","offlineCallback","w","addEventListener","removeEventListener"],"mappings":";;;;;;;;;;;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA,SAASA,QAAT,EAAmBC,SAAnB,QAAoC,OAApC;AACA,OAAOC,YAAP,MAAyB,gBAAzB;AACA,OAAOC,cAAP,MAA2B,kBAA3B;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AACA,eAAe,SAASC,WAAT,GAAuB;AACpC,MAAMC,SAAS,GAAGH,YAAY,EAA9B;;AACA,kBAAgCF,QAAQ,CAAC;AAAA,WACvCK,SAAS,CAACC,OAAV,GAAoBD,SAAS,CAACC,OAAV,CAAkBC,SAAlB,CAA4BC,MAAhD,GAAyD,KADlB;AAAA,GAAD,CAAxC;AAAA;AAAA,MAAOC,QAAP;AAAA,MAAiBC,WAAjB;;AAIA,MAAMC,iBAAiB,GAAGR,cAAc,CAAC,YAAM;AAC7CO,IAAAA,WAAW,CAAC,IAAD,CAAX;AACD,GAFuC,CAAxC;AAGA,MAAME,kBAAkB,GAAGT,cAAc,CAAC,YAAM;AAC9CO,IAAAA,WAAW,CAAC,KAAD,CAAX;AACD,GAFwC,CAAzC;AAGAT,EAAAA,SAAS,CAAC,YAAM;AACd,QAAMY,cAAc,GAAG,SAAjBA,cAAiB;AAAA,aAAMF,iBAAiB,CAACL,OAAlB,EAAN;AAAA,KAAvB;;AACA,QAAMQ,eAAe,GAAG,SAAlBA,eAAkB;AAAA,aAAMF,kBAAkB,CAACN,OAAnB,EAAN;AAAA,KAAxB;;AACA,QAAMS,CAAC,GAAGV,SAAS,CAACC,OAApB;AACAS,IAAAA,CAAC,CAACC,gBAAF,CAAmB,QAAnB,EAA6BH,cAA7B;AACAE,IAAAA,CAAC,CAACC,gBAAF,CAAmB,SAAnB,EAA8BF,eAA9B;AAEA,WAAO,YAAM;AACXC,MAAAA,CAAC,CAACE,mBAAF,CAAsB,QAAtB,EAAgCJ,cAAhC;AACAE,MAAAA,CAAC,CAACE,mBAAF,CAAsB,SAAtB,EAAiCH,eAAjC;AACD,KAHD;AAID,GAXQ,EAWN,CAACT,SAAD,EAAYM,iBAAZ,EAA+BC,kBAA/B,CAXM,CAAT;AAaA,SAAOH,QAAP;AACD","sourcesContent":["/*\n * Copyright (c) 2022 Anton Bagdatyev (Tonix)\n *\n * Permission is hereby granted, free of charge, to any person\n * obtaining a copy of this software and associated documentation\n * files (the \"Software\"), to deal in the Software without\n * restriction, including without limitation the rights to use,\n * copy, modify, merge, publish, distribute, sublicense, and/or sell\n * copies of the Software, and to permit persons to whom the\n * Software is furnished to do so, subject to the following\n * conditions:\n *\n * The above copyright notice and this permission notice shall be\n * included in all copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND,\n * EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES\n * OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND\n * NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT\n * HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY,\n * WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING\n * FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR\n * OTHER DEALINGS IN THE SOFTWARE.\n */\n\nimport { useState, useEffect } from \"react\";\nimport useWindowRef from \"./useWindowRef\";\nimport useCallbackRef from \"./useCallbackRef\";\n\n/**\n * Hook returning whether the user's computer or device is online or offline.\n *\n * @see https://developer.mozilla.org/en-US/docs/Web/API/NavigatorOnLine/onLine\n * @see https://developer.mozilla.org/en-US/docs/Web/API/NavigatorOnLine/Online_and_offline_events\n *\n * @return {boolean} True if online, false if offline.\n */\nexport default function useIsOnline() {\n  const windowRef = useWindowRef();\n  const [isOnline, setIsOnline] = useState(() =>\n    windowRef.current ? windowRef.current.navigator.onLine : false\n  );\n\n  const onlineCallbackRef = useCallbackRef(() => {\n    setIsOnline(true);\n  });\n  const offlineCallbackRef = useCallbackRef(() => {\n    setIsOnline(false);\n  });\n  useEffect(() => {\n    const onlineCallback = () => onlineCallbackRef.current();\n    const offlineCallback = () => offlineCallbackRef.current();\n    const w = windowRef.current;\n    w.addEventListener(\"online\", onlineCallback);\n    w.addEventListener(\"offline\", offlineCallback);\n\n    return () => {\n      w.removeEventListener(\"online\", onlineCallback);\n      w.removeEventListener(\"offline\", offlineCallback);\n    };\n  }, [windowRef, onlineCallbackRef, offlineCallbackRef]);\n\n  return isOnline;\n}\n"],"file":"useIsOnline.js"}